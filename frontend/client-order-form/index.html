<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Hacer Pedido - Souvenirs Personalizados</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="app-container">

        <!-- STEP 1: Login/Account -->
        <section id="step-login" class="step active">
            <div class="header">
                <div class="logo">üé®</div>
                <h1>Souvenirs Personalizados</h1>
                <p class="subtitle">Haz tu pedido en minutos</p>
            </div>

            <div class="card">
                <h2>Bienvenido</h2>
                <p class="help-text">Ingresa tu tel√©fono y correo para comenzar</p>

                <div class="form-group">
                    <label for="phone">N√∫mero de Tel√©fono *</label>
                    <input type="tel"
                           id="phone"
                           placeholder="55 1234 5678"
                           maxlength="10"
                           pattern="[0-9]{10}"
                           autocomplete="tel"
                           required>
                    <span class="input-hint">10 d√≠gitos, sin espacios</span>
                </div>

                <div class="form-group">
                    <label for="login-email">Correo Electr√≥nico *</label>
                    <input type="email"
                           id="login-email"
                           placeholder="tucorreo@ejemplo.com"
                           autocomplete="email"
                           required>
                    <span class="input-hint">Usaremos este correo para confirmar tu pedido</span>
                </div>

                <button id="continue-phone" class="btn btn-primary btn-large">
                    Continuar ‚Üí
                </button>
            </div>
        </section>

        <!-- STEP 1.5: Confirm Client Data (for returning clients) -->
        <section id="step-confirm" class="step">
            <div class="progress-bar">
                <div class="progress" style="width: 20%"></div>
            </div>

            <button class="btn-back" onclick="goBack()">‚Üê Atr√°s</button>

            <div class="card">
                <h2>Confirma tus Datos</h2>
                <p class="help-text">¬øLa informaci√≥n que se muestra aqu√≠ corresponde con tus datos?</p>

                <div class="info-box" style="background: #eff6ff; border-left: 4px solid var(--primary);">
                    <div class="icon">üì¶</div>
                    <div>
                        <strong>Esta informaci√≥n ser√° usada para enviar tu pedido</strong>
                        <p style="margin-top: 8px; color: var(--gray-700);">
                            Aseg√∫rate que todo est√© correcto antes de continuar
                        </p>
                    </div>
                </div>

                <div id="confirm-data-display" style="background: var(--gray-50); padding: 20px; border-radius: 12px; margin: 20px 0;">
                    <!-- Data will be populated by JavaScript -->
                </div>

                <div style="display: flex; gap: 12px;">
                    <button id="edit-data-btn" class="btn btn-secondary" style="flex: 1;" onclick="editClientData()">
                        ‚úèÔ∏è Modificar Datos
                    </button>
                    <button id="confirm-data-btn" class="btn btn-primary" style="flex: 2;">
                        ‚úÖ Datos Correctos, Continuar
                    </button>
                </div>
            </div>
        </section>

        <!-- STEP 2: Client Info (for new clients or edit) -->
        <section id="step-info" class="step">
            <div class="progress-bar">
                <div class="progress" style="width: 25%"></div>
            </div>

            <button class="btn-back" onclick="goBack()">‚Üê Atr√°s</button>

            <div class="card">
                <h2>Tus Datos</h2>
                <p class="help-text" id="info-help-text">Completa tu informaci√≥n</p>

                <div class="form-group">
                    <label for="client-name">Nombre Completo *</label>
                    <input type="text"
                           id="client-name"
                           placeholder="Mar√≠a Gonz√°lez"
                           autocomplete="name"
                           required>
                </div>

                <div class="form-group">
                    <label for="client-email">Correo Electr√≥nico (opcional)</label>
                    <input type="email"
                           id="client-email"
                           placeholder="maria@ejemplo.com"
                           autocomplete="email">
                </div>

                <!-- Delivery Address Warning -->
                <div class="info-box" style="background: #fef3c7; border-left: 4px solid #f59e0b; margin: 20px 0;">
                    <div class="icon">üì¶</div>
                    <div>
                        <strong>Informaci√≥n de Env√≠o</strong>
                        <p style="margin-top: 8px; color: var(--gray-700); font-size: 14px;">
                            Esta direcci√≥n ser√° usada para enviar tu pedido. <strong>Aseg√∫rate de que todos los datos sean correctos</strong>, de lo contrario tu paquete no llegar√° a su destino.
                        </p>
                    </div>
                </div>

                <div class="form-group">
                    <label for="client-address">Calle y N√∫mero *</label>
                    <input type="text"
                           id="client-address"
                           placeholder="Ej: Av. Insurgentes Sur 1234"
                           autocomplete="street-address"
                           required>
                    <span class="input-hint">Incluye nombre de la calle y n√∫mero exterior/interior</span>
                </div>

                <div class="form-group">
                    <label for="client-colonia">Colonia *</label>
                    <input type="text"
                           id="client-colonia"
                           placeholder="Ej: Del Valle"
                           required>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="client-city">Ciudad/Municipio *</label>
                        <input type="text"
                               id="client-city"
                               placeholder="Ej: Benito Ju√°rez"
                               autocomplete="address-level2"
                               required>
                    </div>
                    <div class="form-group">
                        <label for="client-state">Estado *</label>
                        <input type="text"
                               id="client-state"
                               placeholder="Ej: CDMX"
                               autocomplete="address-level1"
                               required>
                    </div>
                </div>

                <div class="form-group">
                    <label for="client-postal">C√≥digo Postal *</label>
                    <input type="text"
                           id="client-postal"
                           placeholder="Ej: 03100"
                           maxlength="5"
                           pattern="[0-9]{5}"
                           autocomplete="postal-code"
                           required>
                    <span class="input-hint">5 d√≠gitos</span>
                </div>

                <div class="form-group">
                    <label for="client-references">Referencias de Ubicaci√≥n (opcional)</label>
                    <textarea id="client-references"
                              rows="2"
                              placeholder="Ej: Entre calle X y Y, edificio azul, port√≥n negro"></textarea>
                    <span class="input-hint">Ay√∫danos a encontrar tu domicilio m√°s f√°cil</span>
                </div>

                <button id="continue-info" class="btn btn-primary btn-large">
                    Continuar ‚Üí
                </button>
            </div>
        </section>

        <!-- STEP 3: Product Selection -->
        <section id="step-products" class="step">
            <div class="progress-bar">
                <div class="progress" style="width: 50%"></div>
            </div>

            <button class="btn-back" onclick="goBack()">‚Üê Atr√°s</button>

            <div class="sticky-header">
                <h2>Selecciona tus Productos</h2>
                <div class="order-total-mini">
                    Total: <strong id="total-mini">$0.00</strong>
                </div>
            </div>

            <div id="products-loading" class="loading">
                <div class="spinner"></div>
                <p>Cargando productos...</p>
            </div>

            <div id="products-container" class="products-grid"></div>

            <div class="sticky-footer">
                <div class="summary">
                    <div class="summary-row">
                        <span>Total:</span>
                        <strong id="order-total">$0.00</strong>
                    </div>
                    <div class="summary-row deposit">
                        <span>Anticipo (50%):</span>
                        <strong id="deposit-amount">$0.00</strong>
                    </div>
                </div>
                <button id="continue-products" class="btn btn-primary btn-large" disabled>
                    Continuar al Evento ‚Üí
                </button>
            </div>
        </section>

        <!-- STEP 4: Event Details -->
        <section id="step-event" class="step">
            <div class="progress-bar">
                <div class="progress" style="width: 75%"></div>
            </div>

            <button class="btn-back" onclick="goBack()">‚Üê Atr√°s</button>

            <div class="card">
                <h2>Detalles del Pedido</h2>

                <div class="form-group">
                    <label for="event-date">¬øNecesitas la mercanc√≠a para una fecha en especial?</label>
                    <input type="date" id="event-date">
                    <span class="input-hint">Opcional - Si tienes un evento o fecha l√≠mite, ind√≠cala aqu√≠</span>
                </div>

                <div class="form-group">
                    <label for="client-notes">Notas del pedido</label>
                    <textarea id="client-notes"
                              rows="4"
                              placeholder="Cosas que te gustar√≠a que supieramos de tu pedido"></textarea>
                </div>

                <div class="form-group">
                    <label>Im√°genes de Referencia (opcional)</label>
                    <div class="file-upload-area" id="file-upload-area">
                        <input type="file"
                               id="reference-images"
                               accept="image/*"
                               multiple
                               max="5"
                               hidden>
                        <div class="upload-prompt">
                            <span class="upload-icon">üì∑</span>
                            <p>Toca para subir im√°genes</p>
                            <span class="file-hint">Sube aqu√≠ fotos de dise√±os/fotos que te hayan gustado</span>
                        </div>
                        <div id="file-preview" class="file-preview"></div>
                    </div>
                </div>

                <button id="continue-event" class="btn btn-primary btn-large">
                    Continuar al Pago ‚Üí
                </button>
            </div>
        </section>

        <!-- STEP 5: Payment Method -->
        <section id="step-payment" class="step">
            <div class="progress-bar">
                <div class="progress" style="width: 90%"></div>
            </div>

            <button class="btn-back" onclick="goBack()">‚Üê Atr√°s</button>

            <div class="card">
                <h2>M√©todo de Pago</h2>

                <div class="payment-summary-box">
                    <div class="summary-row">
                        <span>Total del Pedido:</span>
                        <strong id="payment-total"></strong>
                    </div>
                    <div class="summary-row highlight">
                        <span>Anticipo a Pagar (50%):</span>
                        <strong id="payment-deposit"></strong>
                    </div>
                </div>

                <div class="payment-methods">
                    <label class="payment-option">
                        <input type="radio" name="payment" value="stripe" checked>
                        <div class="payment-card">
                            <div class="payment-icon">üí≥</div>
                            <div class="payment-info">
                                <strong>Tarjeta de Cr√©dito/D√©bito</strong>
                                <p>Pago seguro con Stripe</p>
                            </div>
                        </div>
                    </label>

                    <label class="payment-option">
                        <input type="radio" name="payment" value="bank_transfer">
                        <div class="payment-card">
                            <div class="payment-icon">üè¶</div>
                            <div class="payment-info">
                                <strong>Transferencia Bancaria</strong>
                                <p>Sube tu comprobante de pago</p>
                            </div>
                        </div>
                    </label>
                </div>

                <!-- Bank Transfer Details (hidden initially) -->
                <div id="bank-details" class="bank-details hidden">
                    <h3>Datos Bancarios</h3>

                    <p style="font-weight: 600; margin-bottom: 16px;">Opci√≥n 1: Transferencia Bancaria</p>
                    <div class="bank-info">
                        <div class="info-row">
                            <span>Banco:</span>
                            <strong id="bank-name">BBVA</strong>
                        </div>
                        <div class="info-row">
                            <span>Cuenta:</span>
                            <strong id="bank-account">012 180 01571714055 4</strong>
                        </div>
                        <div class="info-row">
                            <span>Titular:</span>
                            <strong id="bank-holder">Iv√°n Valencia</strong>
                        </div>
                        <div class="info-row">
                            <span>Monto:</span>
                            <strong id="bank-amount" class="highlight-amount"></strong>
                        </div>
                    </div>

                    <p style="font-weight: 600; margin: 24px 0 16px;">Opci√≥n 2: Dep√≥sito en Banco/Cajero/Oxxo</p>
                    <div class="bank-info">
                        <div class="info-row">
                            <span>Banco:</span>
                            <strong>BBVA</strong>
                        </div>
                        <div class="info-row">
                            <span>Tarjeta:</span>
                            <strong>4152 3138 4049 8567</strong>
                        </div>
                        <div class="info-row">
                            <span>Titular:</span>
                            <strong>Iv√°n Valencia</strong>
                        </div>
                        <div class="info-row">
                            <span>Monto:</span>
                            <strong id="card-amount" class="highlight-amount"></strong>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Subir Comprobante de Pago</label>
                        <div class="file-upload-area" id="proof-upload-area">
                            <input type="file"
                                   id="payment-proof"
                                   accept="image/*,application/pdf"
                                   hidden>
                            <div class="upload-prompt">
                                <span class="upload-icon">üìÑ</span>
                                <p>Toca para subir comprobante</p>
                                <span class="file-hint">Imagen o PDF</span>
                            </div>
                            <div id="proof-preview" class="file-preview"></div>
                        </div>
                    </div>
                </div>

                <button id="submit-order" class="btn btn-primary btn-large">
                    <span id="submit-text">‚úÖ Enviar Pedido</span>
                    <span id="submit-loader" class="hidden">
                        <span class="spinner-small"></span> Procesando...
                    </span>
                </button>
            </div>
        </section>

        <!-- STEP 6: Success -->
        <section id="step-success" class="step">
            <div class="success-container">
                <div class="success-icon">‚úÖ</div>
                <h2>¬°Pedido Enviado!</h2>

                <div class="success-details">
                    <p class="order-number">
                        Tu n√∫mero de pedido:<br>
                        <strong id="success-order-number"></strong>
                    </p>

                    <div class="info-box">
                        <p><strong>¬øQu√© sigue?</strong></p>
                        <ul>
                            <li>‚úì Recibir√°s confirmaci√≥n por correo</li>
                            <li>‚úì Revisaremos tu pedido</li>
                            <li>‚úì Te contactaremos pronto</li>
                        </ul>
                    </div>
                </div>

                <button onclick="window.location.reload()" class="btn btn-secondary btn-large">
                    Hacer Otro Pedido
                </button>
            </div>
        </section>

    </div>

    <script src="order-form.js"></script>
</body>
</html>
